@page "/tasks"
@namespace CulinaryCommand.Components.Pages
@using CulinaryCommand.Components.Custom
@using CulinaryCommand.Data.Entities

<PageTitle>My Tasks</PageTitle>

<div class="container mt-4">
    <h1 class="fw-bold mb-1">Welcome, @username</h1>
    <div class="text-muted mb-3">Here's what needs your attention today.</div>

    <PrepTasksPanel Tasks="@prepTasks" OnMarkDone="HandleMarkDone" />
</div>

@code {
    private string username = "Alex";

    // Temporary sample data (replace with API call)
    private List<PrepTask> prepTasks = new()
    {
        new() { Title="Chop onions", Par=5, Count=2, DurationMin=30 },
        new() { Title="Prepare marinara sauce", Par=3, Count=1, DurationMin=30 },
        new() { Title="Portion chicken breasts", Par=10, Count=4, DurationMin=30 },
        new() { Title="Mix house dressing", Par=2, Count=0, DurationMin=30 },
        new() { Title="Slice fresh bread", Par=8, Count=2, DurationMin=30 },
    };

    Task HandleMarkDone(PrepTask t)
    {
        // TODO: persist completion via your API
        Console.WriteLine($"[DEBUG] Marked done: {t.Title}");
        return Task.CompletedTask;
    }
}