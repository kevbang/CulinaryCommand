<h4 class="mb-4">
    <i class="fas fa-cog me-2"></i>User Preferences
</h4>

<EditForm Model="@preferencesModel" OnValidSubmit="@HandlePreferencesSubmit">
    <div class="preferences-section mb-4">
        <h5 class="mb-3">
            <i class="fas fa-palette me-2"></i>Appearance
        </h5>

        <div class="mb-3">
            <label for="theme" class="form-label">Theme</label>
            <select id="theme" class="form-control" @bind="preferencesModel.Theme">
                <option value="Light">Light</option>
                <option value="Dark">Dark</option>
                <option value="Auto">Auto (System)</option>
            </select>
            <small class="form-text text-muted">
                Choose your preferred color theme
            </small>
        </div>

        <div class="mb-3">
            <div class="form-check">
                <InputCheckbox id="compactMode" class="form-check-input"
                               @bind-Value="preferencesModel.CompactMode" />
                <label class="form-check-label" for="compactMode">
                    <strong>Compact mode</strong>
                    <br />
                    <small class="text-muted">
                        Use a more condensed layout to fit more content
                    </small>
                </label>
            </div>
        </div>
    </div>

    <div class="preferences-section mb-4">
        <h5 class="mb-3">
            <i class="fas fa-globe me-2"></i>Localization
        </h5>

        <div class="row mb-3">
            <div class="col-md-6">
                <label for="language" class="form-label">Language</label>
                <select id="language" class="form-control" @bind="preferencesModel.Language">
                    <option value="English">English</option>
                    <option value="Spanish">Spanish</option>
                    <option value="French">French</option>
                    <option value="German">German</option>
                </select>
            </div>
            <div class="col-md-6">
                <label for="timezone" class="form-label">Timezone</label>
                <select id="timezone" class="form-control" @bind="preferencesModel.Timezone">
                    <option value="UTC-5">Eastern Time (UTC-5)</option>
                    <option value="UTC-6">Central Time (UTC-6)</option>
                    <option value="UTC-7">Mountain Time (UTC-7)</option>
                    <option value="UTC-8">Pacific Time (UTC-8)</option>
                </select>
            </div>
        </div>

        <div class="mb-3">
            <label for="dateFormat" class="form-label">Date Format</label>
            <select id="dateFormat" class="form-control"
                    @bind="preferencesModel.DateFormat">
                <option value="MM/DD/YYYY">MM/DD/YYYY (US Format)</option>
                <option value="DD/MM/YYYY">DD/MM/YYYY (European Format)</option>
                <option value="YYYY-MM-DD">YYYY-MM-DD (ISO Format)</option>
            </select>
        </div>
    </div>

    <div class="preferences-section mb-4">
        <h5 class="mb-3">
            <i class="fas fa-sliders-h me-2"></i>Behavior
        </h5>

        <div class="mb-3">
            <div class="form-check">
                <InputCheckbox id="autoSave" class="form-check-input"
                               @bind-Value="preferencesModel.AutoSave" />
                <label class="form-check-label" for="autoSave">
                    <strong>Auto-save changes</strong>
                    <br />
                    <small class="text-muted">
                        Automatically save form changes without manual confirmation
                    </small>
                </label>
            </div>
        </div>

        <div class="mb-3">
            <div class="form-check">
                <InputCheckbox id="showTooltips" class="form-check-input"
                               @bind-Value="preferencesModel.ShowTooltips" />
                <label class="form-check-label" for="showTooltips">
                    <strong>Show helpful tooltips</strong>
                    <br />
                    <small class="text-muted">
                        Display additional information when hovering over elements
                    </small>
                </label>
            </div>
        </div>

        <div class="mb-3">
            <label for="itemsPerPage" class="form-label">Items per page</label>
            <select id="itemsPerPage" class="form-control"
                    @bind="preferencesModel.ItemsPerPage">
                <option value="10">10</option>
                <option value="25">25</option>
                <option value="50">50</option>
                <option value="100">100</option>
            </select>
            <small class="form-text text-muted">
                Number of items to display in tables and lists
            </small>
        </div>
    </div>

    <button type="submit" class="btn btn-success settings-btn">
        Update Preferences
    </button>
</EditForm>

@code {
    private PreferencesModel preferencesModel = new();

    protected override void OnInitialized()
    {
        preferencesModel = new PreferencesModel
        {
            Theme        = "Light",
            Language     = "English",
            Timezone     = "UTC-6",
            DateFormat   = "MM/DD/YYYY",
            AutoSave     = true,
            CompactMode  = false,
            ShowTooltips = true,
            ItemsPerPage = "25"
        };
    }

    private void HandlePreferencesSubmit()
    {
        Console.WriteLine("Preferences updated");
        Console.WriteLine($"Theme: {preferencesModel.Theme}");
        Console.WriteLine($"Language: {preferencesModel.Language}");
        // TODO: Persist to backend
    }

    private class PreferencesModel
    {
        public string Theme        { get; set; } = "Light";
        public string Language     { get; set; } = "English";
        public string Timezone     { get; set; } = "UTC-6";
        public string DateFormat   { get; set; } = "MM/DD/YYYY";
        public bool   AutoSave     { get; set; } = true;
        public bool   CompactMode  { get; set; } = false;
        public bool   ShowTooltips { get; set; } = true;
        public string ItemsPerPage { get; set; } = "25";
    }
}